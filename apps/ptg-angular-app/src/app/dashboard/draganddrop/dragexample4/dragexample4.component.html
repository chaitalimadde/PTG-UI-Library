<div class="wrapper3 mt-5 pt-3">
  <div class="row pb-2">
    <div class="col-5">
      <h4 [innerHTML]="'DRAG_DROP_EX_3' | translate"></h4>
    </div>
    <div class="col-7">
      <button
        id="r_add_manual_btn"
        type="button"
        class="btn btn-primary"
        (click)="addManual()"
      >
        {{ 'ADD_MANUAL' | translate }}
      </button>
    </div>
  </div>
  <div
    class="row drag-box-wrapper"
    [ngClass]="{ 'commitment-scroll': collectionArray.length > 0 }"
    [formGroup]="collectionForm"
    cdkDropList
    (cdkDropListDropped)="drop1($event)"
  >
    <ng-container formArrayName="collection">
      <ng-container
        *ngFor="let requirement of collectionArray.controls; let i = index"
        [formGroupName]="i"
      >
        <div class="drag-box d-flex justify-content-between my-2" cdkDrag>
          <div class="d-flex">
            <!-- <p cdkDragHandle class="px-2"><i class="fa-solid fa-bars" id="r-drag-icon_{{ i }}}"></i></p> -->
            <div class="r-code-section">
              <span>{{ i + 1 }}.</span>
              <input
                #code
                id="{{ codeKey }}_{{ i }}"
                [formControlName]="codeKey"
                class="item-name item-desc"
                [ngClass]="{
                  'is-invalid': collectionArray.at(i).get(codeKey).errors
                }"
              />

              <span
                class="invalid-feedback"
                *ngIf="
                  collectionArray.at(i).get(codeKey).errors.invalidCode as error
                "
              >
                {{ error }}
              </span>
            </div>
          </div>
          <div class="d-flex">
            <!-- TODO: Add Switch button -->
            <button
              id="r_reset_{{ i }}"
              class="icon-btn mx-1"
              (click)="resetCollection(i)"
            >
              <i class="fa-solid fa-arrow-rotate-right"></i>
            </button>
            <button
              id="r_delete_{{ i }}"
              class="icon-btn mx-1"
              (click)="deleteCollection(i)"
            >
              <i class="fa-solid fa-trash-can"></i>
            </button>
            <button id="r_drag_{{ i }}" class="icon-btn mx-1" cdkDragHandle>
              <i class="fa-solid fa-bars"></i>
            </button>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
